<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ ркХрлЛркЯрлЗрк╢рки ркЬркирк░рлЗркЯрк░ - Working Version</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400..800&family=Noto+Sans+Gujarati:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .form-section, .preview-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .products-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e1e5e9;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h3 {
            color: #667eea;
            margin: 0;
            font-size: 1.3rem;
        }

        .add-product-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(40, 167, 69, 0.3);
        }

        .add-product-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .product-item {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .product-item:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f8f9fa;
        }

        .product-header h4 {
            color: #667eea;
            margin: 0;
            font-size: 1.1rem;
        }

        .remove-product-btn {
            background: #dc3545;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-product-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .pdf-buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .gujarati-pdf-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .gujarati-pdf-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }

        .discount-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .btn-text {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .btn-subtext {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .admin-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .admin-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Noto Sans Gujarati', 'Baloo Bhai 2', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }


        .test-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .test-btn:hover {
            background: #c82333;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .pdf-buttons-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ ркХрлЛркЯрлЗрк╢рки ркЬркирк░рлЗркЯрк░</h1>
            <p>Patel Traders Quotation Generator System</p>
        </div>

        <!-- Test Button -->
        <!-- <div style="text-align: center; margin-bottom: 20px;">
            <button class="test-btn" onclick="testAllButtons()">ркмркзрк╛ ркмркЯрки ркЯрлЗрк╕рлНркЯ ркХрк░рлЛ</button>
        </div> -->

        <div class="main-content">
            <div class="form-section">
                <h2>ркХрлЛркЯрлЗрк╢рки рклрлЛрк░рлНрко</h2>
                <form id="quotationForm">
                    <div class="form-group">
                        <label for="customerName">ркЧрлНрк░рк╛рк╣ркХркирлБркВ ркирк╛рко *</label>
                        <input type="text" id="customerName" name="customerName" required>
                    </div>

                    <div class="form-group">
                        <label for="contactInfo">рк╕ркВрккрк░рлНркХ ркорк╛рк╣рк┐ркдрлА *</label>
                        <input type="text" id="contactInfo" name="contactInfo" required>
                    </div>

                    <div class="form-group">
                        <label for="customerAddress">ркЧрлНрк░рк╛рк╣ркХркирлБркВ рк╕рк░ркирк╛ркорлБркВ *</label>
                        <textarea id="customerAddress" name="customerAddress" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="company">ркХркВрккркирлА рккрк╕ркВркж ркХрк░рлЛ *</label>
                        <select id="company" name="company" >
                            <option value="">ркХркВрккркирлА рккрк╕ркВркж ркХрк░рлЛ</option>
                            <option value="companyA">ркХркВрккркирлА A - рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                            <option value="companyB">ркХркВрккркирлА B - ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                            <option value="companyC">ркХркВрккркирлА C - ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                        </select>
                    </div>

                    <!-- Multiple Products Section -->
                    <div class="products-section">
                        <div class="section-header">
                            <h3>рккрлНрк░рлЛркбркХрлНркЯ / рк╕рлЗрк╡рк╛ркУ</h3>
                            <button type="button" id="addProduct" class="add-product-btn">+ ркирк╡рлБркВ рккрлНрк░рлЛркбркХрлНркЯ ркЙркорлЗрк░рлЛ</button>
                        </div>
                        
                        <div id="productsContainer">
                            <!-- Product 1 (Default) -->
                            <div class="product-item" data-product-index="0">
                                <div class="product-header">
                                    <h4>рккрлНрк░рлЛркбркХрлНркЯ 1</h4>
                                    <button type="button" class="remove-product-btn" style="display: none;">├Ч</button>
                                </div>
                                
                                <div class="product-fields">
                                    <div class="form-group">
                                        <label>рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко *</label>
                                        <select class="product-name" required>
                                            <option value="">рккрлНрк░рлЛркбркХрлНркЯ рккрк╕ркВркж ркХрк░рлЛ</option>
                                            <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА</option>
                                            <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА</option>
                                            <option value="ркЦрк╛ркдрк╛рк╡рк╣рлА рлзркШрк╛">ркЦрк╛ркдрк╛рк╡рк╣рлА рлзркШрк╛</option>
                                            <option value="ркЕрк╡рлЗркЬрлА ркмрлБркХ">ркЕрк╡рлЗркЬрлА ркмрлБркХ</option>
                                            <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (рк╕рк╛ркжрлА)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (рк╕рк╛ркжрлА)</option>
                                            <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркХрлБркорк╛рк░,ркХркирлНркпрк╛)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркХрлБркорк╛рк░,ркХркирлНркпрк╛)</option>
                                            <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркорлЛркЯрлА)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркорлЛркЯрлА)</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 84 ркирк╛рко">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 84 ркирк╛рко</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 127 ркирк╛рко">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 127 ркирк╛рко</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА рк╡ркбрлЛркжрк░рк╛">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА рк╡ркбрлЛркжрк░рк╛</option>
                                            <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА (рлпрлл ркирк╛ркорлЛ)">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА (рлпрлл ркирк╛ркорлЛ)</option>
                                            <option value="рк╡рк┐ркжрлНркпрк╛рк░рлНркерлА рк╕рк░ркирк╛ркорлБркВ рклрлЛрк░рлНрко">рк╡рк┐ркжрлНркпрк╛рк░рлНркерлА рк╕рк░ркирк╛ркорлБркВ рклрлЛрк░рлНрко</option>
                                            <option value="рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко ркорк╛ркзрлНркпркорк┐ркХ/рккрлНрк░рк╛ркеркорк┐ркХ">рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко ркорк╛ркзрлНркпркорк┐ркХ/рккрлНрк░рк╛ркеркорк┐ркХ</option>
                                            <option value="рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко рк╣рк╛ркпрк░ рк╕рлЗркХркирлНркбрк░рлА">рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко рк╣рк╛ркпрк░ рк╕рлЗркХркирлНркбрк░рлА</option>
                                            <option value="ркарк░рк╛рк╡ркмрлБркХ">ркарк░рк╛рк╡ркмрлБркХ</option>
                                            <option value="ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="ркбрлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркбрлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="ркбрлА.ркПрк▓.рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркбрлА.ркПрк▓.рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рлзркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рк░ркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рлзркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рк░ркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рлзркШрк╛</option>
                                            <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рк░ркШрк╛</option>
                                            <option value="рк╕рлА.рккрлА.ркПркл. рк░ркЬрлАрк╕рлНркЯрк░">рк╕рлА.рккрлА.ркПркл. рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="рк╕рлНркЯрлЗрк╢ркирк░рлА рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">рк╕рлНркЯрлЗрк╢ркирк░рлА рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="рккрлНрк░рк╛ркеркорк┐ркХ ркЗрк╕рлНрккрлЗркХрк╢рки рк░рлАрккрлЛрк░рлНркЯ">рккрлНрк░рк╛ркеркорк┐ркХ ркЗрк╕рлНрккрлЗркХрк╢рки рк░рлАрккрлЛрк░рлНркЯ</option>
                                            <option value="ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                            <option value="ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                            <option value="ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛">ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛</option>
                                            <option value="ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛">ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛">ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛">ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛</option>
                                            <option value="рк╡рк╛ркЙркЪрк░ рклрлЛрк░рлНрко">рк╡рк╛ркЙркЪрк░ рклрлЛрк░рлНрко</option>
                                            <option value="рк░рлЛркЬркорлЗрк│ рлзркШрк╛">рк░рлЛркЬркорлЗрк│ рлзркШрк╛</option>
                                            <option value="рк░рлЛркЬркорлЗрк│ рк░ркШрк╛">рк░рлЛркЬркорлЗрк│ рк░ркШрк╛</option>
                                            <option value="рк░рлЛркЬркорлЗрк│ 3 ркШрк╛">рк░рлЛркЬркорлЗрк│ 3 ркШрк╛</option>
                                            <option value="рк░рлЛркЬркорлЗрк│ 4 ркШрк╛">рк░рлЛркЬркорлЗрк│ 4 ркШрк╛</option>
                                            <option value="рк░рлЛркЬркорлЗрк│ 5 ркШрк╛">рк░рлЛркЬркорлЗрк│ 5 ркШрк╛</option>
                                            <option value="рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 4 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 4 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 8 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 8 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА рклрлВрк▓ рк╕рк╛ркИркЭ 8 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА рклрлВрк▓ рк╕рк╛ркИркЭ 8 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 16 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 16 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 16 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 16 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 16 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 16 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 12 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 12 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 12 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 12 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                            <option value="ркПрк▓.рк╕рлА. ркЗрк╢рлНркпрлВ рк░ркЬрк┐рк╕рлНркЯрк░">ркПрк▓.рк╕рлА. ркЗрк╢рлНркпрлВ рк░ркЬрк┐рк╕рлНркЯрк░</option>
                                            <option value="ркмрлЛркирк╛рклрк╛ркЗркб ркмрлБркХ">ркмрлЛркирк╛рклрк╛ркЗркб ркмрлБркХ</option>
                                            <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 15x20 500 ркирк╛рко">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 15x20 500 ркирк╛рко</option>
                                            <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 1000 ркирк╛рко (15x20)">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 1000 ркирк╛рко (15x20)</option>
                                            <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ ркирк╛рко (15x20 2000 ркирк╛рко)">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ ркирк╛рко (15x20 2000 ркирк╛рко)</option>
                                            <option value="рк╕рк╛ркоркпрк┐ркХ рк░ркЬрлАрк╕рлНркЯрк░">рк╕рк╛ркоркпрк┐ркХ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛">рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛</option>
                                            <option value="рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛">рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛</option>
                                            <option value="рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛">рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛</option>
                                            <option value="рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛">рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛</option>
                                            <option value="рк╢рк┐ркХрлНрк╖ркХркирлБркВ рк╕ркоркпрккркдрлНрк░ркХ">рк╢рк┐ркХрлНрк╖ркХркирлБркВ рк╕ркоркпрккркдрлНрк░ркХ</option>
                                            <option value="рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (20x30)">рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (20x30)</option>
                                            <option value="рк╡рк░рлНркЧ рк╕ркоркпрккркдрлНрк░ркХ (ркЯрлБ ркХрк▓рк░)">рк╡рк░рлНркЧ рк╕ркоркпрккркдрлНрк░ркХ (ркЯрлБ ркХрк▓рк░)</option>
                                            <option value="рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (15x20)">рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (15x20)</option>
                                            <option value="ркирк╛рко/ркЕркЯркХ/ркЬрк╛ркдрк┐ ркмркжрк▓рк╡рк╛ркирлБркВ рклрлЛрк░рлНрко">ркирк╛рко/ркЕркЯркХ/ркЬрк╛ркдрк┐ ркмркжрк▓рк╡рк╛ркирлБркВ рклрлЛрк░рлНрко</option>
                                            <option value="ркХрлЛркирлНрк╕рлЛрк▓рк┐ркбрлЗркЯрлЗркб рк░рк┐ркЭрк▓рлНркЯрк╢рлАркЯ">ркХрлЛркирлНрк╕рлЛрк▓рк┐ркбрлЗркЯрлЗркб рк░рк┐ркЭрк▓рлНркЯрк╢рлАркЯ</option>
                                            <option value="S.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">S.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="H.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">H.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="ркорлБрк╡ркорлЗркирлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">ркорлБрк╡ркорлЗркирлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="ркорлБрк▓рк╛ркХрк╛ркдрлА рк░ркЬрлАрк╕рлНркЯрк░">ркорлБрк▓рк╛ркХрк╛ркдрлА рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркирк╛ркирлА">рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркирк╛ркирлА</option>
                                            <option value="рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркЫрлАркВркЯ ркмрк╛ркЗркирлНркбрлАркВркЧ">рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркЫрлАркВркЯ ркмрк╛ркЗркирлНркбрлАркВркЧ</option>
                                            <option value="рккрк░рк┐ркгрк╛рко ркХрк╛рк░рлНркб (рккрлНрк░рк╛./ркЙркЪрлНркЪ рккрлНрк░рк╛.)">рккрк░рк┐ркгрк╛рко ркХрк╛рк░рлНркб (рккрлНрк░рк╛./ркЙркЪрлНркЪ рккрлНрк░рк╛.)</option>
                                            <option value="ркПркХркЭрк╛ркорлАркирлЗрк╢рки ркПрк░рлЗркЬркорлЗркирлНркЯ ркмрлБркХ">ркПркХркЭрк╛ркорлАркирлЗрк╢рки ркПрк░рлЗркЬркорлЗркирлНркЯ ркмрлБркХ</option>
                                            <option value="ркПркХркЭрк╛ркорлАркирлЗрк╢рки рк╕рлБрккрк░рк╡рлАркЭрки ркмрлБркХ">ркПркХркЭрк╛ркорлАркирлЗрк╢рки рк╕рлБрккрк░рк╡рлАркЭрки ркмрлБркХ</option>
                                            <option value="ркПркХркЭрк╛ркорк┐ркирлЗрк╢рки ркЧрлЗрк░рк╣рк╛ркЬрк░ ркмрлБркХ">ркПркХркЭрк╛ркорк┐ркирлЗрк╢рки ркЧрлЗрк░рк╣рк╛ркЬрк░ ркмрлБркХ</option>
                                            <option value="рк╢рк┐ркХрлНрк╖ркХ ркирлЛркЯрк┐рк╕ ркмрлБркХ">рк╢рк┐ркХрлНрк╖ркХ ркирлЛркЯрк┐рк╕ ркмрлБркХ</option>
                                            <option value="рк░рлЛрк╕рлНркЯрк░ рк░ркЬрлАрк╕рлНркЯрк░">рк░рлЛрк╕рлНркЯрк░ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                            <option value="рк░рлЛрк╕рлНркЯрк░ рк░ркЬрк┐рк╕рлНркЯрк░ рк╡рк┐ркХрк▓рк╛ркВркЧ">рк░рлЛрк╕рлНркЯрк░ рк░ркЬрк┐рк╕рлНркЯрк░ рк╡рк┐ркХрк▓рк╛ркВркЧ</option>
                                            <option value="ркзрлЛрк░ркг-рлп рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ (ркЕркирлБрк╕рлБркЪрк┐ркд-рлзрли)">ркзрлЛрк░ркг-рлп рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ (ркЕркирлБрк╕рлБркЪрк┐ркд-рлзрли)</option>
                                            <option value="ркзрлЛрк░ркг-рлзрлж рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ">ркзрлЛрк░ркг-рлзрлж рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ</option>
                                            <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлп (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлп (рклрлЛрк░ ркХрк▓рк░)</option>
                                            <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлзрлж (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлзрлж (рклрлЛрк░ ркХрк▓рк░)</option>
                                            <option value="ркорк╛рк╕рк┐ркХ рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркЙ.ркорк╛. рклрлЛрк░ ркХрк▓рк░">ркорк╛рк╕рк┐ркХ рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркЙ.ркорк╛. рклрлЛрк░ ркХрк▓рк░</option>
                                            <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлз ркерлА рло (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлз ркерлА рло (рклрлЛрк░ ркХрк▓рк░)</option>
                                            <option value="ркЕркирлНркп">ркЕркирлНркп</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group custom-product-group" style="display: none;">
                                        <label>ркХрк╕рлНркЯрко рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко</label>
                                        <input type="text" class="custom-product" placeholder="ркдркорк╛рк░рлБркВ рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко рк▓ркЦрлЛ">
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>ркЬркерлНркерлЛ *</label>
                                            <input type="number" class="quantity" min="1" step="1" required oninput="validateQuantity(this)">
                                        </div>
                                        <div class="form-group">
                                            <label>ркПркХрко ркнрк╛рк╡ (тВ╣) *</label>
                                            <input type="number" class="unit-price" min="0" step="0.01" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>ркирлЛркВркз</label>
                                        <input type="text" class="product-notes" placeholder="рккрлНрк░рлЛркбркХрлНркЯ рк╡рк┐рк╢рлЗ рк╡ркзрк╛рк░рк╛ркирлА ркорк╛рк╣рк┐ркдрлА">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notes">ркирлЛркВркз (рк╡рлИркХрк▓рлНрккрк┐ркХ)</label>
                        <textarea id="notes" name="notes" rows="3"></textarea>
                    </div>

                    <button type="submit" class="generate-btn">ркХрлЛркЯрлЗрк╢рки ркЬркирк░рлЗркЯ ркХрк░рлЛ</button>
                </form>
            </div>

            <div class="preview-section" id="previewSection" style="display: none;">
                <h2>ркХрлЛркЯрлЗрк╢рки рккрлВрк░рлНрк╡рк╛рк╡рк▓рлЛркХрки</h2>
                <div class="quotation-preview" id="quotationPreview"></div>
                
                <!-- <div class="gujarati-pdf-buttons">
                    <h4 class="pdf-section-title">ркЧрлБркЬрк░рк╛ркдрлА PDF (ркмрлЗркЯрк░ рклрлЛркирлНркЯ рк╕рккрлЛрк░рлНркЯ)</h4>
                    <div class="pdf-buttons-grid">
                        <button id="generateGujaratiPDF0" class="gujarati-pdf-btn">
                            <span class="discount-badge">0%</span>
                            <span class="btn-text">ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</span>
                            <span class="btn-subtext">ркЧрлБркЬрк░рк╛ркдрлА PDF</span>
                        </button>
                        <button id="generateGujaratiPDF5" class="gujarati-pdf-btn">
                            <span class="discount-badge">5%</span>
                            <span class="btn-text">ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</span>
                            <span class="btn-subtext">ркЧрлБркЬрк░рк╛ркдрлА PDF</span>
                        </button>
                        <button id="generateGujaratiPDF18" class="gujarati-pdf-btn">
                            <span class="discount-badge">18%</span>
                            <span class="btn-text">ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</span>
                            <span class="btn-subtext">ркЧрлБркЬрк░рк╛ркдрлА PDF</span>
                        </button>
                    </div> -->
                    
                    <!-- Individual Company PDF Generation -->
                    <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border: 2px solid #667eea;">
                        <h4 style="color: #667eea; margin-bottom: 15px; text-align: center;">ркХркВрккркирлА-рк╡рк┐рк╢рк┐рк╖рлНркЯ PDF ркЬркирк░рлЗрк╢рки</h4>
                        <p style="text-align: center; margin-bottom: 20px; color: #666;">ркжрк░рлЗркХ ркХркВрккркирлА ркорк╛ркЯрлЗ ркЕрк▓ркЧ PDF ркбрк╛ркЙркирк▓рлЛркб ркХрк░рлЛ</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <!-- рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ -->
                            <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; border: 2px solid #3498db;">
                                <h5 style="color: #3498db; margin-bottom: 10px; font-size: 18px;">рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕</h5>
                                <p style="font-size: 14px; color: #666; margin-bottom: 15px;">0% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ - рккрлВрк░рлНркг ркХрк┐ркВркоркд</p>
                                <button id="generatePatelPDF" class="generate-btn" style="width: 100%; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);">
                                    <span style="font-size: 1.2rem;">ЁЯУД</span>
                                    <span style="margin-left: 10px;">рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ PDF</span>
                                </button>
                            </div>
                            
                            <!-- ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ -->
                            <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; border: 2px solid #e74c3c;">
                                <h5 style="color: #e74c3c; margin-bottom: 10px; font-size: 18px;">ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕</h5>
                                <p style="font-size: 14px; color: #666; margin-bottom: 15px;">5% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ - ркерлЛркбрлА ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</p>
                                <button id="generateUmiyaPDF" class="generate-btn" style="width: 100%; background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                                    <span style="font-size: 1.2rem;">ЁЯУД</span>
                                    <span style="margin-left: 10px;">ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ PDF</span>
                                </button>
                            </div>
                            
                            <!-- ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ -->
                            <div style="text-align: center; padding: 20px; background: white; border-radius: 10px; border: 2px solid #27ae60;">
                                <h5 style="color: #27ae60; margin-bottom: 10px; font-size: 18px;">ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕</h5>
                                <p style="font-size: 14px; color: #666; margin-bottom: 15px;">18% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ - ркорлЛркЯрлА ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</p>
                                <button id="generateMahalaxmiPDF" class="generate-btn" style="width: 100%; background: linear-gradient(135deg, #27ae60 0%, #229954 100%);">
                                    <span style="font-size: 1.2rem;">ЁЯУД</span>
                                    <span style="margin-left: 10px;">ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ PDF</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Bulk Download Option -->
                        <div style="text-align: center; margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
                            <p style="margin-bottom: 10px; color: #856404; font-weight: bold;">ркЕркерк╡рк╛ ркдрлНрк░ркгрлЗркп PDF ркПркХ рк╕рк╛ркерлЗ ZIP рклрк╛ркЗрк▓ркорк╛ркВ ркбрк╛ркЙркирк▓рлЛркб ркХрк░рлЛ</p>
                            <button id="generateBulkPDFs" class="generate-btn" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                                <span style="font-size: 1.2rem;">ЁЯУж</span>
                                <span style="margin-left: 10px;">ркдрлНрк░ркгрлЗркп PDF ZIP ркбрк╛ркЙркирк▓рлЛркб</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dynamic Admin Panel -->
        <div class="admin-section">
            <h2>ркПркбркорк┐рки рккрлЗркирк▓</h2>
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="admin-btn" onclick="toggleAdminPanel()">ркХркВрккркирлА рк╡рк┐ркЧркдрлЛ рк╕ркВрккрк╛ркжрки</button>
                <button class="admin-btn" onclick="viewHistory()">ркХрлЛркЯрлЗрк╢рки ркЗркдрк┐рк╣рк╛рк╕</button>
            </div>
            
            <!-- Company Details Edit Section -->
            <div id="companyEditSection" style="display: none; margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                <h3>ркХркВрккркирлА рк╡рк┐ркЧркдрлЛ рк╕ркВрккрк╛ркжрки</h3>
                <div style="margin-bottom: 20px;">
                    <label for="editCompanySelect" style="display: block; margin-bottom: 5px; font-weight: bold;">ркХркВрккркирлА рккрк╕ркВркж ркХрк░рлЛ:</label>
                    <select id="editCompanySelect" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px; margin-bottom: 15px;" onchange="loadCompanyData()">
                        <option value="companyA">ркХркВрккркирлА A - рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                        <option value="companyB">ркХркВрккркирлА B - ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                        <option value="companyC">ркХркВрккркирлА C - ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div>
                        <label for="editCompanyName" style="display: block; margin-bottom: 5px; font-weight: bold;">ркХркВрккркирлА ркирк╛рко:</label>
                        <input type="text" id="editCompanyName" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
                    </div>
                    <div>
                        <label for="editCompanyAddress" style="display: block; margin-bottom: 5px; font-weight: bold;">рк╕рк░ркирк╛ркорлБркВ:</label>
                        <input type="text" id="editCompanyAddress" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div>
                        <label for="editCompanyPhone" style="display: block; margin-bottom: 5px; font-weight: bold;">рклрлЛрки ркиркВркмрк░:</label>
                        <input type="text" id="editCompanyPhone" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
                    </div>
                    <div>
                        <label for="editCompanyEmail" style="display: block; margin-bottom: 5px; font-weight: bold;">ркЗркорлЗркЗрк▓:</label>
                        <input type="email" id="editCompanyEmail" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <button class="admin-btn" onclick="saveCompanyData()" style="background: #28a745; margin-right: 10px;">рк╕рлЗрк╡ ркХрк░рлЛ</button>
                    <button class="admin-btn" onclick="resetCompanyData()" style="background: #ffc107; margin-right: 10px;">рк░рлАрк╕рлЗркЯ ркХрк░рлЛ</button>
                    <button class="admin-btn" onclick="hideAdminPanel()" style="background: #6c757d;">ркмркВркз ркХрк░рлЛ</button>
                </div>
                
                <div id="companyEditStatus" style="margin-top: 10px; padding: 10px; border-radius: 4px;"></div>
            </div>
        </div>

    </div>

    <script>
        // Global variables
        let currentQuotation = null;
        let quotationHistory = JSON.parse(localStorage.getItem('quotationHistory')) || [];

        // Companies data
        let companies = {
            companyA: {
                name: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                address: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, ркЕркоркжрк╛рк╡рк╛ркж',
                phone: '9876543210',
                email: 'info@pateltraders.com'
            },
            companyB: {
                name: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                address: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╡ркбрлЛркжрк░рк╛',
                phone: '9876543211',
                email: 'info@umiyatraders.com'
            },
            companyC: {
                name: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕',
                address: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╕рлБрк░ркд',
                phone: '9876543212',
                email: 'info@mahalaxmitraders.com'
            }
        };

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Working quotation page loaded');
            setupEventListeners();
            loadImportedProducts();
            loadSavedCompanyData();
        });

        function setupEventListeners() {
            console.log('Setting up event listeners');
            
            // Form submission
            const form = document.getElementById('quotationForm');
            if (form) {
                form.addEventListener('submit', handleFormSubmit);
                console.log('Form event listener added');
            }

            // Add product button
            const addBtn = document.getElementById('addProduct');
            if (addBtn) {
                addBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Add product button clicked');
                    addNewProduct();
                });
                console.log('Add product button event listener added');
            } else {
                console.error('Add product button not found');
            }

            // PDF generation buttons
            const pdf0Btn = document.getElementById('generateGujaratiPDF0');
            const pdf5Btn = document.getElementById('generateGujaratiPDF5');
            const pdf18Btn = document.getElementById('generateGujaratiPDF18');

            if (pdf0Btn) {
                pdf0Btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('PDF 0% button clicked');
                    generateGujaratiPDF(0);
                });
                console.log('PDF 0% button event listener added');
            }

            if (pdf5Btn) {
                pdf5Btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('PDF 5% button clicked');
                    generateGujaratiPDF(5);
                });
                console.log('PDF 5% button event listener added');
            }

            if (pdf18Btn) {
                pdf18Btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('PDF 18% button clicked');
                    generateGujaratiPDF(18);
                });
                console.log('PDF 18% button event listener added');
            }

            // Individual company PDF generation buttons
            const patelPdfBtn = document.getElementById('generatePatelPDF');
            const umiyaPdfBtn = document.getElementById('generateUmiyaPDF');
            const mahalaxmiPdfBtn = document.getElementById('generateMahalaxmiPDF');
            const bulkPdfBtn = document.getElementById('generateBulkPDFs');

            if (patelPdfBtn) {
                patelPdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Patel Traders PDF button clicked');
                    generateIndividualPDF('рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕', 0);
                });
                console.log('Patel PDF button event listener added');
            }

            if (umiyaPdfBtn) {
                umiyaPdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Umiya Traders PDF button clicked');
                    generateIndividualPDF('ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕', 5);
                });
                console.log('Umiya PDF button event listener added');
            }

            if (mahalaxmiPdfBtn) {
                mahalaxmiPdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Mahalaxmi Traders PDF button clicked');
                    generateIndividualPDF('ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕', 18);
                });
                console.log('Mahalaxmi PDF button event listener added');
            }

            if (bulkPdfBtn) {
                bulkPdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Bulk PDF generation button clicked');
                    generateBulkPDFs();
                });
                console.log('Bulk PDF button event listener added');
            }

            // Product name changes
            document.addEventListener('change', function(e) {
                if (e.target.classList.contains('product-name')) {
                    handleProductNameChange(e.target);
                    autoFillProductPrice(e.target);
                }
            });

            // Remove product buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('remove-product-btn')) {
                    removeProduct(e.target);
                }
            });
        }

        function testAllButtons() {
            alert('ркмркЯрки ркЯрлЗрк╕рлНркЯ рк╢рк░рлВ...');
            
            // Test add product button
            const addBtn = document.getElementById('addProduct');
            if (addBtn) {
                console.log('Add product button found');
                addBtn.click();
            } else {
                console.error('Add product button not found');
            }
            
            // Test form
            const form = document.getElementById('quotationForm');
            if (form) {
                console.log('Form found');
            } else {
                console.error('Form not found');
            }
            
            alert('ркмркЯрки ркЯрлЗрк╕рлНркЯ рккрлВрк░рлНркг! Console ркЬрлБркУ.');
        }

        function addNewProduct() {
            console.log('Adding new product');
            
            const container = document.getElementById('productsContainer');
            if (!container) {
                console.error('Products container not found');
                return;
            }
            
            const productCount = container.children.length;
            const newIndex = productCount;
            
            const productHTML = `
                <div class="product-item" data-product-index="${newIndex}">
                    <div class="product-header">
                        <h4>рккрлНрк░рлЛркбркХрлНркЯ ${newIndex + 1}</h4>
                        <button type="button" class="remove-product-btn">├Ч</button>
                    </div>
                    
                    <div class="product-fields">
                        <div class="form-group">
                            <label>рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко *</label>
                            <select class="product-name" required>
                                <option value="">рккрлНрк░рлЛркбркХрлНркЯ рккрк╕ркВркж ркХрк░рлЛ</option>
                                <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА</option>
                                <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА</option>
                                <option value="ркЦрк╛ркдрк╛рк╡рк╣рлА рлзркШрк╛">ркЦрк╛ркдрк╛рк╡рк╣рлА рлзркШрк╛</option>
                                <option value="ркЕрк╡рлЗркЬрлА ркмрлБркХ">ркЕрк╡рлЗркЬрлА ркмрлБркХ</option>
                                <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (рк╕рк╛ркжрлА)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (рк╕рк╛ркжрлА)</option>
                                <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркХрлБркорк╛рк░,ркХркирлНркпрк╛)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркХрлБркорк╛рк░,ркХркирлНркпрк╛)</option>
                                <option value="ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркорлЛркЯрлА)">ркжрлИркирк┐ркХ рк╣рк╛ркЬрк░рлА ркмрлБркХ (ркорлЛркЯрлА)</option>
                                <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА</option>
                                <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЕркВркЧрлНрк░рлЗркЬрлА</option>
                                <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 84 ркирк╛рко">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 84 ркирк╛рко</option>
                                <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 127 ркирк╛рко">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ 127 ркирк╛рко</option>
                                <option value="ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА рк╡ркбрлЛркжрк░рк╛">ркорк╛рк╕рк┐ркХ рк╣рк╛ркЬрк░рлАрккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА рк╡ркбрлЛркжрк░рк╛</option>
                                <option value="рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА (рлпрлл ркирк╛ркорлЛ)">рк╡рк╛рк░рлНрк╖рк┐ркХ рк╣рк╛ркЬрк░рлА рккркдрлНрк░ркХ ркЧрлБркЬрк░рк╛ркдрлА (рлпрлл ркирк╛ркорлЛ)</option>
                                <option value="рк╡рк┐ркжрлНркпрк╛рк░рлНркерлА рк╕рк░ркирк╛ркорлБркВ рклрлЛрк░рлНрко">рк╡рк┐ркжрлНркпрк╛рк░рлНркерлА рк╕рк░ркирк╛ркорлБркВ рклрлЛрк░рлНрко</option>
                                <option value="рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко ркорк╛ркзрлНркпркорк┐ркХ/рккрлНрк░рк╛ркеркорк┐ркХ">рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко ркорк╛ркзрлНркпркорк┐ркХ/рккрлНрк░рк╛ркеркорк┐ркХ</option>
                                <option value="рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко рк╣рк╛ркпрк░ рк╕рлЗркХркирлНркбрк░рлА">рккрлНрк░рк╡рлЗрк╢ рклрлЛрк░рлНрко рк╣рк╛ркпрк░ рк╕рлЗркХркирлНркбрк░рлА</option>
                                <option value="ркарк░рк╛рк╡ркмрлБркХ">ркарк░рк╛рк╡ркмрлБркХ</option>
                                <option value="ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЯрлНркпрлБрк╢рки рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="ркбрлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркбрлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="ркбрлА.ркПрк▓.рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркбрлА.ркПрк▓.рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">рк╕рлА.ркПрк▓. рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рлзркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рккрлНрк░рк╛ркеркорк┐ркХ рк░ркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рлзркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ ркорк╛ркзрлНркпркорк┐ркХ рк░ркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рлзркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рлзркШрк╛</option>
                                <option value="рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рк░ркШрк╛">рккркЧрк╛рк░ рккркдрлНрк░ркХ рк╡рлНркпркХрлНркдрк┐ркЧркд рк░ркШрк╛</option>
                                <option value="рк╕рлА.рккрлА.ркПркл. рк░ркЬрлАрк╕рлНркЯрк░">рк╕рлА.рккрлА.ркПркл. рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЗркирк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЖркЙркЯрк╡рк░рлНркб рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="рк╕рлНркЯрлЗрк╢ркирк░рлА рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">рк╕рлНркЯрлЗрк╢ркирк░рлА рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="рккрлНрк░рк╛ркеркорк┐ркХ ркЗрк╕рлНрккрлЗркХрк╢рки рк░рлАрккрлЛрк░рлНркЯ">рккрлНрк░рк╛ркеркорк┐ркХ ркЗрк╕рлНрккрлЗркХрк╢рки рк░рлАрккрлЛрк░рлНркЯ</option>
                                <option value="ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛">ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рлзркШрк╛</option>
                                <option value="ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛">ркЬрлА.рккрлА.ркПркл рк░ркЬрлАрк╕рлНркЯрк░ рк░ркШрк╛</option>
                                <option value="ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛">ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛</option>
                                <option value="ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛">ркжрлИркирлАркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛</option>
                                <option value="ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛">ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рлзркШрк╛</option>
                                <option value="ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛">ркорк╛рк╕рк┐ркХ рклрлА ркЖрк╡ркХ рккркдрлНрк░ркХ рк░ркШрк╛</option>
                                <option value="рк╡рк╛ркЙркЪрк░ рклрлЛрк░рлНрко">рк╡рк╛ркЙркЪрк░ рклрлЛрк░рлНрко</option>
                                <option value="рк░рлЛркЬркорлЗрк│ рлзркШрк╛">рк░рлЛркЬркорлЗрк│ рлзркШрк╛</option>
                                <option value="рк░рлЛркЬркорлЗрк│ рк░ркШрк╛">рк░рлЛркЬркорлЗрк│ рк░ркШрк╛</option>
                                <option value="рк░рлЛркЬркорлЗрк│ 3 ркШрк╛">рк░рлЛркЬркорлЗрк│ 3 ркШрк╛</option>
                                <option value="рк░рлЛркЬркорлЗрк│ 4 ркШрк╛">рк░рлЛркЬркорлЗрк│ 4 ркШрк╛</option>
                                <option value="рк░рлЛркЬркорлЗрк│ 5 ркШрк╛">рк░рлЛркЬркорлЗрк│ 5 ркШрк╛</option>
                                <option value="рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 4 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 4 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 8 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 8 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 4 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА рклрлВрк▓ рк╕рк╛ркИркЭ 8 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА рклрлВрк▓ рк╕рк╛ркИркЭ 8 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рк╕рккрлНрк▓рлАркорлЗркирлНркЯрк░рлА ркХркЯрк╕рк╛ркИркЭ 4 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 16 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">рккрлБрк░рк╛ркгрлА ркХркЯрк╕рк╛ркИркЭ 16 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 16 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 16 рккрлЗркЬ (50x80 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 16 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 16 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                <option value="ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 12 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)">ркмрлЛрк░рлНркб ркЯрк╛ркИркк ркЪрлЛрк░рк╕ 12 рккрлЗркЬ (50x68 inch.) (1000 ркиркВркЧ)</option>
                                <option value="рклрлВрк▓ рк╕рк╛ркИркЭ 12 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)">рклрлВрк▓ рк╕рк╛ркИркЭ 12 рккрлЗркЬ (61x76 inch.) (1000 ркиркВркЧ)</option>
                                <option value="ркПрк▓.рк╕рлА. ркЗрк╢рлНркпрлВ рк░ркЬрк┐рк╕рлНркЯрк░">ркПрк▓.рк╕рлА. ркЗрк╢рлНркпрлВ рк░ркЬрк┐рк╕рлНркЯрк░</option>
                                <option value="ркмрлЛркирк╛рклрк╛ркЗркб ркмрлБркХ">ркмрлЛркирк╛рклрк╛ркЗркб ркмрлБркХ</option>
                                <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 15x20 500 ркирк╛рко">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 15x20 500 ркирк╛рко</option>
                                <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 1000 ркирк╛рко (15x20)">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ 1000 ркирк╛рко (15x20)</option>
                                <option value="ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ ркирк╛рко (15x20 2000 ркирк╛рко)">ркЬркирк░рк▓ рк░ркЬрлАрк╕рлНркЯрк░ ркирк╛рко (15x20 2000 ркирк╛рко)</option>
                                <option value="рк╕рк╛ркоркпрк┐ркХ рк░ркЬрлАрк╕рлНркЯрк░">рк╕рк╛ркоркпрк┐ркХ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛">рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛</option>
                                <option value="рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛">рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛</option>
                                <option value="рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛">рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 1ркШрк╛</option>
                                <option value="рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛">рк╢рк┐ркХрлНрк╖ркХ рк▓рк╛ркЗркмрлНрк░рлЗрк░рлА рк░ркЬрлАрк╕рлНркЯрк░ 2ркШрк╛</option>
                                <option value="рк╢рк┐ркХрлНрк╖ркХркирлБркВ рк╕ркоркпрккркдрлНрк░ркХ">рк╢рк┐ркХрлНрк╖ркХркирлБркВ рк╕ркоркпрккркдрлНрк░ркХ</option>
                                <option value="рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (20x30)">рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (20x30)</option>
                                <option value="рк╡рк░рлНркЧ рк╕ркоркпрккркдрлНрк░ркХ (ркЯрлБ ркХрк▓рк░)">рк╡рк░рлНркЧ рк╕ркоркпрккркдрлНрк░ркХ (ркЯрлБ ркХрк▓рк░)</option>
                                <option value="рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (15x20)">рк╕рк╛ркорк╛ркирлНркп рк╕ркоркпрккркдрлНрк░ркХ (15x20)</option>
                                <option value="ркирк╛рко/ркЕркЯркХ/ркЬрк╛ркдрк┐ ркмркжрк▓рк╡рк╛ркирлБркВ рклрлЛрк░рлНрко">ркирк╛рко/ркЕркЯркХ/ркЬрк╛ркдрк┐ ркмркжрк▓рк╡рк╛ркирлБркВ рклрлЛрк░рлНрко</option>
                                <option value="ркХрлЛркирлНрк╕рлЛрк▓рк┐ркбрлЗркЯрлЗркб рк░рк┐ркЭрк▓рлНркЯрк╢рлАркЯ">ркХрлЛркирлНрк╕рлЛрк▓рк┐ркбрлЗркЯрлЗркб рк░рк┐ркЭрк▓рлНркЯрк╢рлАркЯ</option>
                                <option value="S.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">S.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="H.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">H.S.C. рк░рлАркЭрк▓рлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="ркорлБрк╡ркорлЗркирлНркЯ рк░ркЬрлАрк╕рлНркЯрк░">ркорлБрк╡ркорлЗркирлНркЯ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="ркорлБрк▓рк╛ркХрк╛ркдрлА рк░ркЬрлАрк╕рлНркЯрк░">ркорлБрк▓рк╛ркХрк╛ркдрлА рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркирк╛ркирлА">рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркирк╛ркирлА</option>
                                <option value="рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркЫрлАркВркЯ ркмрк╛ркЗркирлНркбрлАркВркЧ">рк╕рк░рлНрк╡рк┐рк╕ ркмрлБркХ ркЫрлАркВркЯ ркмрк╛ркЗркирлНркбрлАркВркЧ</option>
                                <option value="рккрк░рк┐ркгрк╛рко ркХрк╛рк░рлНркб (рккрлНрк░рк╛./ркЙркЪрлНркЪ рккрлНрк░рк╛.)">рккрк░рк┐ркгрк╛рко ркХрк╛рк░рлНркб (рккрлНрк░рк╛./ркЙркЪрлНркЪ рккрлНрк░рк╛.)</option>
                                <option value="ркПркХркЭрк╛ркорлАркирлЗрк╢рки ркПрк░рлЗркЬркорлЗркирлНркЯ ркмрлБркХ">ркПркХркЭрк╛ркорлАркирлЗрк╢рки ркПрк░рлЗркЬркорлЗркирлНркЯ ркмрлБркХ</option>
                                <option value="ркПркХркЭрк╛ркорлАркирлЗрк╢рки рк╕рлБрккрк░рк╡рлАркЭрки ркмрлБркХ">ркПркХркЭрк╛ркорлАркирлЗрк╢рки рк╕рлБрккрк░рк╡рлАркЭрки ркмрлБркХ</option>
                                <option value="ркПркХркЭрк╛ркорк┐ркирлЗрк╢рки ркЧрлЗрк░рк╣рк╛ркЬрк░ ркмрлБркХ">ркПркХркЭрк╛ркорк┐ркирлЗрк╢рки ркЧрлЗрк░рк╣рк╛ркЬрк░ ркмрлБркХ</option>
                                <option value="рк╢рк┐ркХрлНрк╖ркХ ркирлЛркЯрк┐рк╕ ркмрлБркХ">рк╢рк┐ркХрлНрк╖ркХ ркирлЛркЯрк┐рк╕ ркмрлБркХ</option>
                                <option value="рк░рлЛрк╕рлНркЯрк░ рк░ркЬрлАрк╕рлНркЯрк░">рк░рлЛрк╕рлНркЯрк░ рк░ркЬрлАрк╕рлНркЯрк░</option>
                                <option value="рк░рлЛрк╕рлНркЯрк░ рк░ркЬрк┐рк╕рлНркЯрк░ рк╡рк┐ркХрк▓рк╛ркВркЧ">рк░рлЛрк╕рлНркЯрк░ рк░ркЬрк┐рк╕рлНркЯрк░ рк╡рк┐ркХрк▓рк╛ркВркЧ</option>
                                <option value="ркзрлЛрк░ркг-рлп рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ (ркЕркирлБрк╕рлБркЪрк┐ркд-рлзрли)">ркзрлЛрк░ркг-рлп рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ (ркЕркирлБрк╕рлБркЪрк┐ркд-рлзрли)</option>
                                <option value="ркзрлЛрк░ркг-рлзрлж рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ">ркзрлЛрк░ркг-рлзрлж рк╕ркЧрлНрк░рк╣рк┐ркд рккрк░рк┐ркгрк╛ркорккркдрлНрк░ркХ</option>
                                <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлп (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлп (рклрлЛрк░ ркХрк▓рк░)</option>
                                <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлзрлж (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлзрлж (рклрлЛрк░ ркХрк▓рк░)</option>
                                <option value="ркорк╛рк╕рк┐ркХ рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркЙ.ркорк╛. рклрлЛрк░ ркХрк▓рк░">ркорк╛рк╕рк┐ркХ рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркЙ.ркорк╛. рклрлЛрк░ ркХрк▓рк░</option>
                                <option value="рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлз ркерлА рло (рклрлЛрк░ ркХрк▓рк░)">рккрлНрк░ркЧркдрк┐ рккркдрлНрк░ркХ ркзрлЛрк░ркг-рлз ркерлА рло (рклрлЛрк░ ркХрк▓рк░)</option>
                                <option value="ркЕркирлНркп">ркЕркирлНркп</option>
                            </select>
                        </div>
                        
                        <div class="form-group custom-product-group" style="display: none;">
                            <label>ркХрк╕рлНркЯрко рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко</label>
                            <input type="text" class="custom-product" placeholder="ркдркорк╛рк░рлБркВ рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко рк▓ркЦрлЛ">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>ркЬркерлНркерлЛ *</label>
                                <input type="number" class="quantity" min="1" step="1" required oninput="validateQuantity(this)">
                            </div>
                            <div class="form-group">
                                <label>ркПркХрко ркнрк╛рк╡ (тВ╣) *</label>
                                <input type="number" class="unit-price" min="0" step="0.01" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ркирлЛркВркз</label>
                            <input type="text" class="product-notes" placeholder="рккрлНрк░рлЛркбркХрлНркЯ рк╡рк┐рк╢рлЗ рк╡ркзрк╛рк░рк╛ркирлА ркорк╛рк╣рк┐ркдрлА">
                        </div>
                    </div>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', productHTML);
            
            // Show remove button for first product if there are multiple
            if (container.children.length > 1) {
                container.querySelector('.product-item:first-child .remove-product-btn').style.display = 'block';
            }
        }

        function handleProductNameChange(selectElement) {
            const productItem = selectElement.closest('.product-item');
            const customGroup = productItem.querySelector('.custom-product-group');
            const customInput = productItem.querySelector('.custom-product');
            
            if (selectElement.value === 'ркЕркирлНркп') {
                customGroup.style.display = 'block';
                customInput.required = true;
            } else {
                customGroup.style.display = 'none';
                customInput.required = false;
            }
        }

        function removeProduct(button) {
            const productItem = button.closest('.product-item');
            const container = document.getElementById('productsContainer');
            
            if (container.children.length > 1) {
                productItem.remove();
                updateProductNumbers();
                
                if (container.children.length === 1) {
                    container.querySelector('.remove-product-btn').style.display = 'none';
                }
            }
        }

        function updateProductNumbers() {
            const container = document.getElementById('productsContainer');
            const products = container.querySelectorAll('.product-item');
            
            products.forEach((product, index) => {
                product.querySelector('h4').textContent = `рккрлНрк░рлЛркбркХрлНркЯ ${index + 1}`;
                product.setAttribute('data-product-index', index);
            });
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            console.log('Form submitted');
            
            const formData = new FormData(e.target);
            
            // Collect all products
            const products = [];
            const productItems = document.querySelectorAll('.product-item');
            
            productItems.forEach((item, index) => {
                const productName = item.querySelector('.product-name').value;
                const customProduct = item.querySelector('.custom-product').value;
                const quantity = parseInt(item.querySelector('.quantity').value);
                const unitPrice = parseFloat(item.querySelector('.unit-price').value);
                const notes = item.querySelector('.product-notes').value;
                
                let finalProductName = productName;
                if (productName === 'ркЕркирлНркп' && customProduct) {
                    finalProductName = customProduct;
                }
                
                products.push({
                    name: finalProductName,
                    quantity: quantity,
                    unitPrice: unitPrice,
                    notes: notes,
                    total: quantity * unitPrice
                });
            });
            
            const quotationData = {
                id: generateQuotationId(),
                date: new Date().toLocaleDateString('gu-IN', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }),
                customerName: formData.get('customerName'),
                contactInfo: formData.get('contactInfo'),
                customerAddress: formData.get('customerAddress'),
                company: formData.get('company'),
                products: products,
                totalAmount: products.reduce((sum, product) => sum + product.total, 0),
                notes: formData.get('notes'),
                timestamp: new Date().toISOString()
            };
            
            currentQuotation = quotationData;
            quotationHistory.unshift(quotationData);
            localStorage.setItem('quotationHistory', JSON.stringify(quotationHistory));
            
            displayQuotationPreview(quotationData);
        }

        function generateQuotationId() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `QTN${year}${month}${day}${random}`;
        }

        function displayQuotationPreview(data) {
            const company = companies[data.company];
            const total = data.totalAmount;
            
            // Generate products table
            const productsTable = data.products.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td>${product.quantity}</td>
                    <td>тВ╣${product.unitPrice.toFixed(2)}</td>
                    <td>тВ╣${product.total.toFixed(2)}</td>
                </tr>
            `).join('');
            
            const preview = document.getElementById('quotationPreview');
            preview.innerHTML = `
                <h3>ркХрлЛркЯрлЗрк╢рки рккрлВрк░рлНрк╡рк╛рк╡рк▓рлЛркХрки</h3>
                <div class="quotation-details">
                    <div class="detail-item">
                        <span class="detail-label">ркХрлЛркЯрлЗрк╢рки ркиркВркмрк░:</span>
                        <span class="detail-value">${data.id}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ркдрк╛рк░рлАркЦ:</span>
                        <span class="detail-value">${data.date}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ркЧрлНрк░рк╛рк╣ркХркирлБркВ ркирк╛рко:</span>
                        <span class="detail-value">${data.customerName}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">рк╕ркВрккрк░рлНркХ:</span>
                        <span class="detail-value">${data.contactInfo}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">рк╕рк░ркирк╛ркорлБркВ:</span>
                        <span class="detail-value">${data.customerAddress}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ркХркВрккркирлА:</span>
                        <span class="detail-value">${company.name}</span>
                    </div>
                </div>
                
                <div class="products-table">
                    <h4>рккрлНрк░рлЛркбркХрлНркЯ рк╡рк┐ркЧркдрлЛ</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко</th>
                                <th>ркЬркерлНркерлЛ</th>
                                <th>ркПркХрко ркнрк╛рк╡</th>
                                <th>ркХрлБрк▓</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${productsTable}
                        </tbody>
                    </table>
                </div>
                
                <div class="pricing-table">
                    <h4>ркнрк╛рк╡ ркЧркгркдрк░рлА</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>рк╡рк░рлНркгрки</th>
                                <th>рк░ркХрко</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ркХрлБрк▓ рк░ркХрко</td>
                                <td>тВ╣${total.toFixed(2)}</td>
                            </tr>
                            <tr>
                                <td>0% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ рк╕рк╛ркерлЗ</td>
                                <td>тВ╣${(total * 1.00).toFixed(2)}</td>
                            </tr>
                            <tr>
                                <td>5% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ рк╕рк╛ркерлЗ</td>
                                <td>тВ╣${(total * 0.95).toFixed(2)}</td>
                            </tr>
                            <tr>
                                <td>18% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ рк╕рк╛ркерлЗ</td>
                                <td>тВ╣${(total * 0.82).toFixed(2)}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                ${data.notes ? `<div class="notes"><strong>ркирлЛркВркз:</strong> ${data.notes}</div>` : ''}
            `;
            
            document.getElementById('previewSection').style.display = 'block';
        }

        function generateGujaratiPDF(discountPercentage, customCompanyName = null, customCompany = null) {
            if (!currentQuotation) {
                alert('рккрк╣рлЗрк▓рк╛ ркХрлЛркЯрлЗрк╢рки рклрлЛрк░рлНрко ркнрк░рлЛ');
                return;
            }
            
            console.log('Generating Gujarati PDF with', discountPercentage, '% discount');
            
            // Use custom company if provided, otherwise use selected company
            const company = customCompany || (customCompanyName ? 
                { name: customCompanyName, address: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ', phone: '1234567890', email: 'info@pateltraders.com' } : 
                companies[currentQuotation.company]);
            const total = currentQuotation.totalAmount;
            const discountedPrice = total * (1 - discountPercentage / 100);
            
            // Create HTML content with A4 size and proper design
            const htmlContent = `
            <!DOCTYPE html>
            <html lang="gu">
            <head>
                <meta charset="UTF-8">
                <style>
                    @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400;500;600;700&family=Noto+Sans+Gujarati:wght@100..900&display=swap');
                    
                    @page {
                        size: A4;
                        margin: 0.5in;
                    }
                    
                    body {
                        font-family: 'Baloo Bhai 2', 'Noto Sans Gujarati', sans-serif;
                        margin: 0;
                        padding: 0;
                        line-height: 1.4;
                        color: #000000;
                        font-size: 12px;
                    }
                    
                    .quotation-container {
                        width: 100%;
                        max-width: 8.5in;
                        margin: 0 auto;
                        background: white;
                    }
                    
                    .header {
                        text-align: center;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    
                    
                    .company-info {
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 30px;
                        padding: 20px;
                        background: #f8f9fa;
                        border-radius: 8px;
                    }
                    
                    .company-details, .customer-details {
                        flex: 1;
                    }
                    
                    .company-details h3, .customer-details h3 {
                        color: #667eea;
                        margin-bottom: 10px;
                        font-size: 16px;
                        border-bottom: 2px solid #667eea;
                        padding-bottom: 5px;
                    }
                    
                    .products-table {
                        width: 100%;
                        border-collapse: collapse;
                        margin: 20px 0;
                        background: white;
                    }
                    
                    .products-table th {
                        background: #feffff;
                        color: black;
                        padding: 12px 8px;
                        text-align: left;
                        font-weight: bold;
                        font-size: 13px;
                    }
                    
                    .products-table td {
                        padding: 10px 8px;
                        border-bottom: 1px solid #ddd;
                        font-size: 12px;
                    }
                    
                    .products-table tr:nth-child(even) {
                        background: #f8f9fa;
                    }
                    
                    .pricing-table {
                        width: 100%;
                        border-collapse: collapse;
                        margin: 20px 0;
                        background: white;
                    }
                    
                    .pricing-table th {
                        background:#feffff;
                        color: black;
                        padding: 12px 8px;
                        text-align: left;
                        font-weight: bold;
                        font-size: 13px;
                    }
                    
                    .pricing-table td {
                        padding: 10px 8px;
                        border-bottom: 1px solid #ddd;
                        font-size: 12px;
                    }
                    
                    .pricing-table tr:last-child td {
                        background: #e8f5e8;
                        font-weight: bold;
                        font-size: 14px;
                    }
                    
                    .notes-section {
                        margin: 20px 0;
                        padding: 15px;
                        background: #f8f9fa;
                        border-left: 4px solid #667eea;
                        border-radius: 0 8px 8px 0;
                    }
                    
                    .notes-section h3 {
                        color: #667eea;
                        margin-bottom: 10px;
                        font-size: 14px;
                    }
                    
                    .signature-section {
                        margin-top: 40px;
                        display: flex;
                        justify-content: flex-end;
                        padding: 20px 0;
                    }
                    
                    .signature-box {
                        text-align: center;
                        width: 200px;
                    }
                    
                    .signature-line {
                        border-top: 1px solid #333;
                        margin-top: 40px;
                        padding-top: 5px;
                        font-size: 12px;
                    }
                    
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        padding: 20px;
                        background: #f8f9fa;
                        border-radius: 8px;
                        font-size: 11px;
                        color: #666;
                    }
                    
                    
                    @media print {
                        body { margin: 0; }
                        .quotation-container { box-shadow: none; }
                    }
                </style>
            </head>
            <body>
                <div class="quotation-container">
                    <div class="header">
                    </div>
                    
                    <div class="company-info">
                        <div class="customer-details">
                            <h3>ркЧрлНрк░рк╛рк╣ркХ рк╡рк┐ркЧркдрлЛ</h3>
                            <strong>ркирк╛рко:</strong> ${currentQuotation.customerName}<br>
                            <strong>рк╕ркВрккрк░рлНркХ:</strong> ${currentQuotation.contactInfo}<br>
                            <strong>рк╕рк░ркирк╛ркорлБркВ:</strong> ${currentQuotation.customerAddress}
                        </div>
                    </div>
                    
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th style="width: 5%;">ркХрлНрк░рко</th>
                                <th style="width: 40%;">рккрлНрк░рлЛркбркХрлНркЯ ркирк╛рко</th>
                                <th style="width: 15%;">ркЬркерлНркерлЛ</th>
                                <th style="width: 20%;">ркПркХрко ркнрк╛рк╡</th>
                                <th style="width: 20%;">ркХрлБрк▓ рк░ркХрко</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${currentQuotation.products.map((product, index) => `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td>${product.name}</td>
                                    <td>${product.quantity}</td>
                                    <td>тВ╣${product.unitPrice.toFixed(2)}</td>
                                    <td>тВ╣${product.total.toFixed(2)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    
                    <table class="pricing-table">
                        <thead>
                            <tr>
                                <th style="width: 70%;">рк╡рк░рлНркгрки</th>
                                <th style="width: 30%;">рк░ркХрко</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ркХрлБрк▓ рк░ркХрко</td>
                                <td>тВ╣${total.toFixed(2)}</td>
                            </tr>
                            <tr>
                                <td>${discountPercentage}% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ</td>
                                <td>тВ╣${(total * discountPercentage / 100).toFixed(2)}</td>
                            </tr>
                            <tr>
                                <td><strong>ркЕркВркдрк┐рко рк░ркХрко</strong></td>
                                <td><strong>тВ╣${discountedPrice.toFixed(2)}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    ${currentQuotation.notes ? `
                        <div class="notes-section">
                            <h3>ркирлЛркВркз</h3>
                            ${currentQuotation.notes}
                        </div>
                    ` : ''}
                    
                    <div class="signature-section">
                        <div class="signature-box" style="margin-left: auto;">
                            <div class="signature-line">ркХркВрккркирлА рк╣рк╕рлНркдрк╛ркХрлНрк╖рк░</div>
                            <div style="margin-top: 10px; font-size: 11px; color: #000;">
                                <b>${company.name}</b><br>
                                ркдрк╛рк░рлАркЦ: _________________
                            </div>
                        </div>
                    </div>
                    
                    <div class="footer">
                        <strong>ркЖ ркХрлЛркЯрлЗрк╢рки 30 ркжрк┐рк╡рк╕ ркорк╛ркЯрлЗ ркорк╛ркирлНркп ркЫрлЗ</strong><br>
                        ркзркирлНркпрк╡рк╛ркж! ркЖрккркирлА рк╕рлЗрк╡рк╛ркорк╛ркВ - ${company.name}
                    </div>
                </div>
            </body>
            </html>
            `;
            
            // Open in new window for printing
            const printWindow = window.open('', '_blank');
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            
            // Set custom title for PDFs
            if (customCompanyName) {
                printWindow.document.title = `${customCompanyName}_${discountPercentage}%_ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ.pdf`;
            }
            
            // Auto print after a short delay
            setTimeout(() => {
                printWindow.print();
            }, 1000);
        }

        function viewHistory() {
            const history = JSON.parse(localStorage.getItem('quotationHistory')) || [];
            if (history.length === 0) {
                alert('ркХрлЛркИ ркХрлЛркЯрлЗрк╢рки ркЗркдрк┐рк╣рк╛рк╕ ркиркерлА');
                return;
            }
            
            let message = `ркХрлБрк▓ ркХрлЛркЯрлЗрк╢рки: ${history.length}\n\n`;
            history.slice(0, 5).forEach((q, index) => {
                message += `${index + 1}. ${q.id} - ${q.customerName} - тВ╣${q.totalAmount.toFixed(2)}\n`;
            });
            
            alert(message);
        }

        function exportData() {
            const data = JSON.parse(localStorage.getItem('quotationHistory')) || [];
            const jsonData = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'quotations_' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
            alert('ркбрлЗркЯрк╛ ркПркХрлНрк╕рккрлЛрк░рлНркЯ ркеркИ ркЧркпрлЛ');
        }

        function clearData() {
            if (confirm('рк╢рлБркВ ркдркорлЗ ркЦрк░рлЗркЦрк░ ркмркзрлЛ ркбрлЗркЯрк╛ ркХрлНрк▓рк┐ркпрк░ ркХрк░рк╡рк╛ ркорк╛ркВркЧрлЛ ркЫрлЛ?')) {
                localStorage.removeItem('quotationHistory');
                alert('ркбрлЗркЯрк╛ ркХрлНрк▓рк┐ркпрк░ ркеркИ ркЧркпрлЛ');
            }
        }

        function showCSVImport() {
            const csvSection = document.getElementById('csvImportSection');
            csvSection.style.display = 'block';
        }

        function hideCSVImport() {
            const csvSection = document.getElementById('csvImportSection');
            csvSection.style.display = 'none';
        }

        function uploadCSV() {
            const fileInput = document.getElementById('csvFile');
            const statusDiv = document.getElementById('csvStatus');
            
            if (!fileInput.files[0]) {
                statusDiv.innerHTML = '<div style="color: red; background: #f8d7da; padding: 10px; border-radius: 4px;">ркХрлГрккрк╛ ркХрк░рлАркирлЗ CSV рклрк╛ркЗрк▓ рккрк╕ркВркж ркХрк░рлЛ</div>';
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const csv = e.target.result;
                    const lines = csv.split('\n');
                    const headers = lines[0].split(',').map(h => h.trim());
                    
                    console.log('CSV Headers:', headers);
                    
                    let importedProducts = 0;
                    let importedQuotations = 0;
                    let errorCount = 0;
                    
                    // Check if this is a product CSV (has id, title, price columns)
                    const isProductCSV = headers.includes('id') && headers.includes('title') && headers.includes('price');
                    
                    if (isProductCSV) {
                        console.log('Processing Product CSV');
                        
                        // Import products to dropdown
                        for (let i = 1; i < lines.length; i++) {
                            if (lines[i].trim()) {
                                const values = lines[i].split(',').map(v => v.trim());
                                if (values.length >= 3) {
                                    const productData = {
                                        id: values[0] || '',
                                        title: values[2] || '', // title column
                                        price: parseFloat(values[4]) || 0, // price column
                                        description: values[3] || '', // description column
                                        availability: values[5] || 'available', // availability column
                                        rating: values[8] || '0' // rating column
                                    };
                                    
                                    // Add to product dropdown
                                    addProductToDropdown(productData);
                                    importedProducts++;
                                } else {
                                    errorCount++;
                                }
                            }
                        }
                        
                        statusDiv.innerHTML = `<div style="color: green; background: #d4edda; padding: 10px; border-radius: 4px;">
                            рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ${importedProducts} рккрлНрк░рлЛркбркХрлНркЯ ркЗркорлНрккрлЛрк░рлНркЯ ркеркпрк╛
                            ${errorCount > 0 ? `<br>${errorCount} рк░рлЗркХрлЛрк░рлНркбркорк╛ркВ ркнрлВрк▓ рк╣ркдрлА` : ''}
                        </div>`;
                        
                    } else {
                        console.log('Processing Quotation CSV');
                        
                        // Import quotations (old format)
                        for (let i = 1; i < lines.length; i++) {
                            if (lines[i].trim()) {
                                const values = lines[i].split(',').map(v => v.trim());
                                if (values.length >= 5) {
                                const quotation = {
                                    id: `QTN${Date.now()}${i}`,
                                    date: new Date().toLocaleDateString('gu-IN', { 
                                        year: 'numeric', 
                                        month: 'long', 
                                        day: 'numeric' 
                                    }),
                                    customerName: values[0] || 'Unknown',
                                        contactInfo: values[1] || '',
                                        company: 'companyA',
                                        products: [{
                                            name: values[2] || 'Unknown Product',
                                            quantity: parseInt(values[3]) || 1,
                                            unitPrice: parseFloat(values[4]) || 0,
                                            notes: values[5] || '',
                                            total: (parseInt(values[3]) || 1) * (parseFloat(values[4]) || 0)
                                        }],
                                        totalAmount: (parseInt(values[3]) || 1) * (parseFloat(values[4]) || 0),
                                        notes: values[6] || '',
                                        timestamp: new Date().toISOString()
                                    };
                                    
                                    quotationHistory.unshift(quotation);
                                    importedQuotations++;
                                } else {
                                    errorCount++;
                                }
                            }
                        }
                        
                        localStorage.setItem('quotationHistory', JSON.stringify(quotationHistory));
                        
                        statusDiv.innerHTML = `<div style="color: green; background: #d4edda; padding: 10px; border-radius: 4px;">
                            рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ${importedQuotations} ркХрлЛркЯрлЗрк╢рки ркЗркорлНрккрлЛрк░рлНркЯ ркеркпрк╛
                            ${errorCount > 0 ? `<br>${errorCount} рк░рлЗркХрлЛрк░рлНркбркорк╛ркВ ркнрлВрк▓ рк╣ркдрлА` : ''}
                        </div>`;
                    }
                    
                    // Hide section after 3 seconds
                    setTimeout(() => {
                        hideCSVImport();
                    }, 3000);
                    
                } catch (error) {
                    statusDiv.innerHTML = `<div style="color: red; background: #f8d7da; padding: 10px; border-radius: 4px;">
                        CSV рклрк╛ркЗрк▓ рккркбрк╡рк╛ркорк╛ркВ ркнрлВрк▓: ${error.message}
                    </div>`;
                }
            };
            
            reader.readAsText(file);
        }

        function addProductToDropdown(productData) {
            // Get all product dropdowns
            const productDropdowns = document.querySelectorAll('.product-name');
            
            productDropdowns.forEach(dropdown => {
                // Check if product already exists
                const existingOption = dropdown.querySelector(`option[value="${productData.title}"]`);
                if (!existingOption) {
                    // Create new option
                    const option = document.createElement('option');
                    option.value = productData.title;
                    option.textContent = `${productData.title} (тВ╣${productData.price})`;
                    option.setAttribute('data-price', productData.price);
                    option.setAttribute('data-description', productData.description);
                    option.setAttribute('data-rating', productData.rating);
                    
                    // Insert before "ркЕркирлНркп" option
                    const otherOption = dropdown.querySelector('option[value="ркЕркирлНркп"]');
                    if (otherOption) {
                        dropdown.insertBefore(option, otherOption);
                    } else {
                        dropdown.appendChild(option);
                    }
                }
            });
            
            // Store in localStorage for persistence
            let importedProducts = JSON.parse(localStorage.getItem('importedProducts')) || [];
            const existingProduct = importedProducts.find(p => p.title === productData.title);
            if (!existingProduct) {
                importedProducts.push(productData);
                localStorage.setItem('importedProducts', JSON.stringify(importedProducts));
            }
        }

        function loadImportedProducts() {
            const importedProducts = JSON.parse(localStorage.getItem('importedProducts')) || [];
            importedProducts.forEach(product => {
                addProductToDropdown(product);
            });
        }

        function autoFillProductPrice(selectElement) {
            const selectedOption = selectElement.options[selectElement.selectedIndex];
            if (selectedOption && selectedOption.hasAttribute('data-price')) {
                const price = selectedOption.getAttribute('data-price');
                const productItem = selectElement.closest('.product-item');
                const unitPriceInput = productItem.querySelector('.unit-price');
                
                if (unitPriceInput && price && price !== '0') {
                    unitPriceInput.value = price;
                    console.log('Auto-filled price:', price);
                }
            }
        }

        function validateQuantity(input) {
            // Remove any non-numeric characters except decimal point
            let value = input.value.replace(/[^0-9]/g, '');
            
            // Ensure it's a positive integer
            if (value === '' || value === '0') {
                value = '1';
            }
            
            // Update the input value
            input.value = value;
            
            // Trigger change event to recalculate totals
            input.dispatchEvent(new Event('change'));
        }


        // Admin Panel Functions
        function toggleAdminPanel() {
            const companyEditSection = document.getElementById('companyEditSection');
            if (companyEditSection.style.display === 'none') {
                companyEditSection.style.display = 'block';
                loadCompanyData(); // Load current company data
            } else {
                companyEditSection.style.display = 'none';
            }
        }

        function hideAdminPanel() {
            const companyEditSection = document.getElementById('companyEditSection');
            companyEditSection.style.display = 'none';
        }

        function loadCompanyData() {
            const companySelect = document.getElementById('editCompanySelect');
            const selectedCompany = companySelect.value;
            
            if (companies[selectedCompany]) {
                const company = companies[selectedCompany];
                document.getElementById('editCompanyName').value = company.name;
                document.getElementById('editCompanyAddress').value = company.address;
                document.getElementById('editCompanyPhone').value = company.phone;
                document.getElementById('editCompanyEmail').value = company.email;
                
                const statusDiv = document.getElementById('companyEditStatus');
                statusDiv.innerHTML = '<div style="color: blue; background: #d1ecf1; padding: 10px; border-radius: 4px;">ркХркВрккркирлА ркбрлЗркЯрк╛ рк▓рлЛркб ркеркпрлЛ</div>';
            }
        }

        function saveCompanyData() {
            const companySelect = document.getElementById('editCompanySelect');
            const selectedCompany = companySelect.value;
            
            const name = document.getElementById('editCompanyName').value;
            const address = document.getElementById('editCompanyAddress').value;
            const phone = document.getElementById('editCompanyPhone').value;
            const email = document.getElementById('editCompanyEmail').value;
            
            if (!name || !address || !phone || !email) {
                const statusDiv = document.getElementById('companyEditStatus');
                statusDiv.innerHTML = '<div style="color: red; background: #f8d7da; padding: 10px; border-radius: 4px;">ркХрлГрккрк╛ ркХрк░рлАркирлЗ ркмркзрк╛ рклрлАрк▓рлНркб ркнрк░рлЛ</div>';
                return;
            }
            
            // Update company data
            companies[selectedCompany] = {
                name: name,
                address: address,
                phone: phone,
                email: email
            };
            
            // Save to localStorage
            localStorage.setItem('companiesData', JSON.stringify(companies));
            
            const statusDiv = document.getElementById('companyEditStatus');
            statusDiv.innerHTML = '<div style="color: green; background: #d4edda; padding: 10px; border-radius: 4px;">ркХркВрккркирлА рк╡рк┐ркЧркдрлЛ рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ рк╕рлЗрк╡ ркеркИ ркЧркИ!</div>';
            
            // Update company dropdown in main form
            updateCompanyDropdown();
            
            // Update admin panel dropdown
            updateAdminDropdown();
        }

        function resetCompanyData() {
            const companySelect = document.getElementById('editCompanySelect');
            const selectedCompany = companySelect.value;
            
            // Reset to original data
            const originalCompanies = {
                companyA: {
                    name: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                    address: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, ркЕркоркжрк╛рк╡рк╛ркж',
                    phone: '9876543210',
                    email: 'info@pateltraders.com'
                },
                companyB: {
                    name: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                    address: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╡ркбрлЛркжрк░рк╛',
                    phone: '9876543211',
                    email: 'info@umiyatraders.com'
                },
                companyC: {
                    name: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕',
                    address: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╕рлБрк░ркд',
                    phone: '9876543212',
                    email: 'info@mahalaxmitraders.com'
                }
            };
            
            companies[selectedCompany] = originalCompanies[selectedCompany];
            loadCompanyData();
            
            const statusDiv = document.getElementById('companyEditStatus');
            statusDiv.innerHTML = '<div style="color: orange; background: #fff3cd; padding: 10px; border-radius: 4px;">ркХркВрккркирлА ркбрлЗркЯрк╛ рк░рлАрк╕рлЗркЯ ркеркпрлЛ</div>';
        }

        function updateCompanyDropdown() {
            const companyDropdown = document.getElementById('company');
            if (companyDropdown) {
                const options = companyDropdown.querySelectorAll('option');
                options.forEach(option => {
                    if (option.value === 'companyA') {
                        option.textContent = `ркХркВрккркирлА A - ${companies.companyA.name}`;
                    } else if (option.value === 'companyB') {
                        option.textContent = `ркХркВрккркирлА B - ${companies.companyB.name}`;
                    } else if (option.value === 'companyC') {
                        option.textContent = `ркХркВрккркирлА C - ${companies.companyC.name}`;
                    }
                });
            }
        }

        function updateAdminDropdown() {
            const adminDropdown = document.getElementById('editCompanySelect');
            if (adminDropdown) {
                const options = adminDropdown.querySelectorAll('option');
                options.forEach(option => {
                    if (option.value === 'companyA') {
                        option.textContent = `ркХркВрккркирлА A - ${companies.companyA.name}`;
                    } else if (option.value === 'companyB') {
                        option.textContent = `ркХркВрккркирлА B - ${companies.companyB.name}`;
                    } else if (option.value === 'companyC') {
                        option.textContent = `ркХркВрккркирлА C - ${companies.companyC.name}`;
                    }
                });
            }
        }

        // Load saved company data on page load
        function loadSavedCompanyData() {
            const savedCompanies = localStorage.getItem('companiesData');
            if (savedCompanies) {
                companies = JSON.parse(savedCompanies);
                updateCompanyDropdown();
                updateAdminDropdown();
            }
        }

        // Generate PDF Content for ZIP
        async function generatePDFContent(company) {
            const total = currentQuotation.totalAmount;
            const discountedPrice = total * (1 - company.discount / 100);
            
            // Create HTML content for PDF
            const htmlContent = `
            <!DOCTYPE html>
            <html lang="gu">
            <head>
                <meta charset="UTF-8">
                <style>
                    @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400;500;600;700&family=Noto+Sans+Gujarati:wght@100..900&display=swap');
                    
                    @page {
                        size: A4;
                        margin: 0.5in;
                    }
                    
                    body {
                        font-family: 'Baloo Bhai 2', 'Noto Sans Gujarati', sans-serif;
                        margin: 0;
                        padding: 0;
                        line-height: 1.4;
                        color: #000000;
                        font-size: 12px;
                    }
                    
                    .quotation-container {
                        width: 100%;
                        max-width: 8.5in;
                        margin: 0 auto;
                        background: white;
                    }
                    
                    .header {
                        text-align: center;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    
                    .company-info {
                        background: #f8f9fa;
                        padding: 20px;
                        border-radius: 8px;
                        margin-bottom: 30px;
                    }
                    
                    .company-name {
                        font-size: 24px;
                        font-weight: bold;
                        color: #2c3e50;
                        margin-bottom: 10px;
                    }
                    
                    .company-details {
                        font-size: 14px;
                        color: #666;
                        line-height: 1.6;
                    }
                    
                    .quotation-title {
                        font-size: 28px;
                        font-weight: bold;
                        color: #2c3e50;
                        margin-bottom: 10px;
                    }
                    
                    .quotation-id {
                        font-size: 16px;
                        color: #666;
                        margin-bottom: 20px;
                    }
                    
                    .section {
                        margin-bottom: 25px;
                    }
                    
                    .section h3 {
                        font-size: 18px;
                        color: #2c3e50;
                        margin-bottom: 15px;
                        border-bottom: 2px solid #3498db;
                        padding-bottom: 5px;
                    }
                    
                    .customer-details {
                        background: #ecf0f1;
                        padding: 15px;
                        border-radius: 5px;
                        margin-bottom: 20px;
                    }
                    
                    .products-table {
                        width: 100%;
                        border-collapse: collapse;
                        margin-bottom: 20px;
                    }
                    
                    .products-table th {
                        background: #000000;
                        color: white;
                        padding: 12px 8px;
                        text-align: left;
                        font-weight: bold;
                        font-size: 13px;
                    }
                    
                    .products-table td {
                        padding: 10px 8px;
                        border-bottom: 1px solid #ddd;
                        font-size: 12px;
                    }
                    
                    .products-table tr:nth-child(even) {
                        background-color: #f9f9f9;
                    }
                    
                    .pricing-table {
                        width: 100%;
                        border-collapse: collapse;
                        margin-top: 20px;
                    }
                    
                    .pricing-table th {
                        background: #000000;
                        color: white;
                        padding: 12px 8px;
                        text-align: left;
                        font-weight: bold;
                        font-size: 13px;
                    }
                    
                    .pricing-table td {
                        padding: 10px 8px;
                        border-bottom: 1px solid #ddd;
                        font-size: 12px;
                    }
                    
                    .total-amount {
                        font-size: 18px;
                        font-weight: bold;
                        color: #2c3e50;
                        text-align: right;
                        margin-top: 20px;
                    }
                    
                    .discount-info {
                        background: #e8f5e8;
                        padding: 15px;
                        border-radius: 5px;
                        margin-top: 20px;
                        text-align: center;
                    }
                    
                    .discount-percentage {
                        font-size: 20px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    
                    .final-amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #2c3e50;
                        margin-top: 10px;
                    }
                    
                    .notes {
                        background: #fff3cd;
                        padding: 15px;
                        border-radius: 5px;
                        margin-top: 20px;
                        border-left: 4px solid #ffc107;
                    }
                    
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        font-size: 12px;
                        color: #666;
                        border-top: 1px solid #ddd;
                        padding-top: 20px;
                    }
                </style>
            </head>
            <body>
                <div class="quotation-container">
                    <div class="header">
                        <div class="quotation-title">ркХрлЛркЯрлЗрк╢рки</div>
                        <div class="quotation-id">ркХрлЛркЯрлЗрк╢рки ркиркВркмрк░: ${currentQuotation.id}</div>
                        <div class="quotation-id">ркдрк╛рк░рлАркЦ: ${currentQuotation.date}</div>
                    </div>
                    
                    <div class="section">
                        <h3>ркЧрлНрк░рк╛рк╣ркХ рк╡рк┐ркЧркдрлЛ</h3>
                        <div class="customer-details">
                            <strong>ркирк╛рко:</strong> ${currentQuotation.customerName}<br>
                            <strong>рк╕ркВрккрк░рлНркХ:</strong> ${currentQuotation.contactInfo}<br>
                            <strong>рк╕рк░ркирк╛ркорлБркВ:</strong> ${currentQuotation.customerAddress}
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>рккрлНрк░рлЛркбркХрлНркЯ рк╡рк┐ркЧркдрлЛ</h3>
                        <table class="products-table">
                            <thead>
                                <tr>
                                    <th>рккрлНрк░рлЛркбркХрлНркЯ</th>
                                    <th>ркЬркерлНркерлЛ</th>
                                    <th>ркжрк░</th>
                                    <th>ркХрлБрк▓</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${currentQuotation.products.map(product => `
                                    <tr>
                                        <td>${product.name}</td>
                                        <td>${product.quantity}</td>
                                        <td>тВ╣${product.unitPrice}</td>
                                        <td>тВ╣${product.total}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="section">
                        <h3>ркХрк┐ркВркоркд рк╡рк┐ркЧркдрлЛ</h3>
                        <table class="pricing-table">
                            <tbody>
                                <tr>
                                    <td>ркХрлБрк▓ рк░ркХрко</td>
                                    <td>тВ╣${total.toFixed(2)}</td>
                                </tr>
                                <tr>
                                    <td>ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ (${company.discount}%)</td>
                                    <td>тВ╣${(total - discountedPrice).toFixed(2)}</td>
                                </tr>
                                <tr style="background: #f8f9fa; font-weight: bold;">
                                    <td>ркЕркВркдрк┐рко рк░ркХрко</td>
                                    <td>тВ╣${discountedPrice.toFixed(2)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    ${currentQuotation.notes ? `<div class="notes"><strong>ркирлЛркВркз:</strong> ${currentQuotation.notes}</div>` : ''}
                    
                    <div class="footer">
                        <p>ркЖ ркХрлЛркЯрлЗрк╢рки 30 ркжрк┐рк╡рк╕ ркорк╛ркЯрлЗ ркорк╛ркирлНркп ркЫрлЗ.</p>
                        <p>ркЖркнрк╛рк░!</p>
                    </div>
                </div>
            </body>
            </html>
            `;
            
            return htmlContent;
        }

        // Individual PDF Generation Function
        function generateIndividualPDF(companyName, discountPercentage) {
            if (!currentQuotation) {
                alert('рккрк╣рлЗрк▓рк╛ ркХрлЛркЯрлЗрк╢рки ркЬркирк░рлЗркЯ ркХрк░рлЛ');
                return;
            }

            console.log(`Generating individual PDF for ${companyName} with ${discountPercentage}% discount`);
            
            // Company details based on name
            let company;
            switch(companyName) {
                case 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕':
                    company = {
                        name: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                        address: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, ркЕркоркжрк╛рк╡рк╛ркж',
                        phone: '9876543210',
                        email: 'info@pateltraders.com'
                    };
                    break;
                case 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕':
                    company = {
                        name: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕',
                        address: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╡ркбрлЛркжрк░рк╛',
                        phone: '9876543211',
                        email: 'info@umiyatraders.com'
                    };
                    break;
                case 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕':
                    company = {
                        name: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕',
                        address: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╕рлБрк░ркд',
                        phone: '9876543212',
                        email: 'info@mahalaxmitraders.com'
                    };
                    break;
            }

            // Generate PDF using existing function with custom company
            generateGujaratiPDF(discountPercentage, company.name, company);
        }

        // Bulk PDF Generation Function
        async function generateBulkPDFs() {
            if (!currentQuotation) {
                alert('рккрк╣рлЗрк▓рк╛ ркХрлЛркЯрлЗрк╢рки ркЬркирк░рлЗркЯ ркХрк░рлЛ');
                return;
            }

            console.log('Starting bulk PDF generation...');
            
            // Company configurations with different names
            const companies = [
                { 
                    name: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕', 
                    address: 'рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, ркЕркоркжрк╛рк╡рк╛ркж',
                    phone: '9876543210',
                    email: 'info@pateltraders.com',
                    discount: 0 
                },
                { 
                    name: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕', 
                    address: 'ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╡ркбрлЛркжрк░рк╛',
                    phone: '9876543211',
                    email: 'info@umiyatraders.com',
                    discount: 5 
                },
                { 
                    name: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕', 
                    address: 'ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ рк╕рк░ркирк╛ркорлБркВ, рк╕рлБрк░ркд',
                    phone: '9876543212',
                    email: 'info@mahalaxmitraders.com',
                    discount: 18 
                }
            ];

            try {
                // Create ZIP file
                const zip = new JSZip();
                
                // Generate PDFs and add to ZIP
                for (let i = 0; i < companies.length; i++) {
                    const company = companies[i];
                    console.log(`Generating PDF ${i + 1}/3 for ${company.name} with ${company.discount}% discount`);
                    
                    // Generate PDF content
                    const pdfContent = await generatePDFContent(company);
                    
                    // Add to ZIP with descriptive filename
                    const filename = `${company.name}_${company.discount}%_ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ.pdf`;
                    zip.file(filename, pdfContent);
                }

                // Generate and download ZIP file
                const zipBlob = await zip.generateAsync({type: "blob"});
                const link = document.createElement('a');
                link.href = URL.createObjectURL(zipBlob);
                link.download = 'ркХрлЛркЯрлЗрк╢рки_ркдрлНрк░ркгрлЗркп_ркХркВрккркирлА.zip';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(link.href);

                // Show completion message
                alert('ркдрлНрк░ркгрлЗркп PDF рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ZIP рклрк╛ркЗрк▓ркорк╛ркВ ркбрк╛ркЙркирк▓рлЛркб ркеркпрк╛!\n\n1. рккркЯрлЗрк▓ ркЯрлНрк░рлЗркбрк░рлНрк╕ - 0% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ\n2. ркЙркорк┐ркпрк╛ ркЯрлНрк░рлЗркбрк░рлНрк╕ - 5% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ\n3. ркорк╣рк╛рк▓ркХрлНрк╖рлНркорлА ркЯрлНрк░рлЗркбрк░рлНрк╕ - 18% ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ');

            } catch (error) {
                console.error('Error generating bulk PDFs:', error);
                alert('PDF ркЬркирк░рлЗрк╢ркиркорк╛ркВ ркнрлВрк▓ ркЖрк╡рлА ркЫрлЗ. ркХрлГрккрк╛ ркХрк░рлАркирлЗ рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ.');
            }
        }
    </script>
</body>
</html>
